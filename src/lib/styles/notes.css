/* Site-Wide Notes and Analysis Styles */

@layer components {

    /* Spacing System - Consistent vertical rhythm */
    .note-space-xs { @apply mb-2; }      /* 8px */
    .note-space-sm { @apply mb-3; }      /* 12px */
    .note-space-md { @apply mb-4; }      /* 16px */
    .note-space-lg { @apply mb-6; }      /* 24px */
    .note-space-xl { @apply mb-8; }      /* 32px */
    .note-space-2xl { @apply mb-12; }    /* 48px */
    
    /* Gap spacing for grids and flex layouts */
    .note-gap-xs { @apply gap-2; }       /* 8px */
    .note-gap-sm { @apply gap-3; }       /* 12px */
    .note-gap-md { @apply gap-4; }       /* 16px */
    .note-gap-lg { @apply gap-6; }       /* 24px */
    .note-gap-xl { @apply gap-8; }       /* 32px */

    /* Section dividers - standardized spacing */
    .note-section-break {
        @apply border-b border-slate-700 note-space-lg;
    }

    /* Color System - Semantic color abstractions */
    
    /* Status Colors */
    .note-color-success { @apply text-green-400; }
    .note-color-error { @apply text-red-400; }
    .note-color-warning { @apply text-yellow-400; }
    .note-color-info { @apply text-blue-400; }
    .note-color-neutral { @apply text-gray-400; }
    
    /* Threat/Risk Level Colors */
    .note-color-risk-high { @apply text-orange-400; }
    .note-color-risk-medium { @apply text-yellow-400; }
    .note-color-risk-low { @apply text-green-400; }
    
    /* Interactive Colors */
    .note-color-primary { @apply text-blue-400; }
    .note-color-secondary { @apply text-emerald-300; }
    .note-color-accent { @apply text-amber-300; }
    
    /* Background Status Colors */
    .note-bg-success { @apply bg-green-500/20; }
    .note-bg-error { @apply bg-red-500/20; }
    .note-bg-warning { @apply bg-yellow-500/20; }
    .note-bg-info { @apply bg-blue-500/20; }
    .note-bg-neutral { @apply bg-gray-500/20; }
    
    /* Background Surfaces */
    .note-bg-surface { @apply bg-slate-800; }
    .note-bg-surface-elevated { @apply bg-slate-700; }
    .note-bg-surface-overlay { @apply bg-slate-900; }
    
    /* Border Colors */
    .note-border-default { @apply border-slate-700; }
    .note-border-success { @apply border-green-600/50; }
    .note-border-error { @apply border-red-600/50; }
    .note-border-warning { @apply border-yellow-600/50; }
    .note-border-info { @apply border-blue-600/50; }

    /* Indicator Dots */
    .note-dot-success { @apply bg-green-400; }
    .note-dot-error { @apply bg-red-400; }
    .note-dot-warning { @apply bg-orange-400; }
    .note-dot-info { @apply bg-blue-400; }
    .note-dot-neutral { @apply bg-gray-400; }

    /* Typography System - Consistent text hierarchy */
    .note-text-body {
        @apply text-base text-gray-300 leading-relaxed;
    }

    .note-text-body-lg {
        @apply md:text-xl sm:text-base text-gray-300 leading-relaxed;
    }

    .note-text-emphasis {
        @apply text-gray-200 font-medium;
    }

    .note-text-caption {
        @apply text-sm text-gray-300 leading-normal;
    }

    .note-text-caption-muted {
        @apply text-sm text-gray-400 leading-normal;
    }

    .note-text-label {
        @apply text-xs text-gray-400 leading-tight;
    }

    .note-text-label-muted {
        @apply text-xs text-gray-500 leading-tight;
    }

    /* Link Styles */
    .note-link-primary {
        @apply note-color-primary hover:text-blue-300 transition-colors;
    }

    .note-link-external {
        @apply note-link-primary hover:underline;
    }

    .note-link-internal {
        @apply note-link-primary underline;
    }

    .note-link-contact {
        @apply font-medium text-blue-600 dark:text-blue-500 hover:underline md:text-xl sm:text-base;
    }

    /* Card Text Styles */
    .note-card-title {
        @apply text-lg font-semibold note-color-primary;
    }

    .note-card-subtitle {
        @apply note-text-caption;
    }

    .note-card-meta {
        @apply note-text-label mt-3;
    }

    /* List Styles */
    .note-list {
        @apply space-y-2 note-text-body;
    }

    .note-list-sm {
        @apply space-y-1 note-text-caption;
    }

    /* Investment Note Typography */
    .note-heading-h1 {
        @apply text-3xl sm:text-4xl font-bold text-slate-100 note-space-xs;
    }

    .note-heading-h2 {
        @apply text-2xl font-bold text-amber-300 note-space-md;
    }

    .note-heading-h3 {
        @apply text-xl font-semibold text-emerald-300 note-space-md;
    }

    .note-heading-h4 {
        @apply text-lg font-medium text-gray-300 note-space-sm;
    }

    .note-heading-card {
        @apply text-xl font-semibold note-color-secondary note-space-md;
    }

    .note-heading-special {
        @apply text-xl font-semibold note-color-accent note-space-md;
    }

    .note-heading-toc {
        @apply text-lg font-semibold text-slate-100 note-space-sm;
    }

    /* Base Card Styles */
    .note-card {
        @apply note-bg-surface rounded-lg note-border-default border;
    }

    .note-card-sm {
        @apply note-card p-4;
    }

    .note-card-md {
        @apply note-card p-6;
    }

    /* Metric Cards for KPIs and Numbers */
    .metric-card {
        @apply note-card-sm text-center;
    }

    /* Info Callout Styles */
    .info-callout {
        @apply border-l-4 rounded-none pl-4 py-4 pr-4 mb-6;
    }

    .info-callout-blue {
        @apply info-callout bg-blue-900/20 border-blue-400;
    }

    .info-callout-red {
        @apply info-callout bg-red-900/20 border-red-400;
    }

    .info-callout-yellow {
        @apply info-callout bg-yellow-900/20 border-yellow-400;
    }

    .info-callout-green {
        @apply info-callout bg-green-900/20 border-green-400;
    }

    /* Risk Assessment Cards */
    .risk-card {
        @apply note-card-md;
    }

    .risk-card-high {
        @apply risk-card note-bg-error note-border-error border;
    }

    .risk-card-medium {
        @apply risk-card note-bg-warning note-border-warning border;
    }

    .risk-card-low {
        @apply risk-card note-bg-success note-border-success border;
    }

    /* Risk Badge Styles */
    .risk-badge {
        @apply px-3 py-1 rounded text-sm font-medium text-center;
    }

    .risk-badge-high {
        @apply risk-badge note-bg-error note-color-error;
    }

    .risk-badge-medium {
        @apply risk-badge note-bg-warning note-color-warning;
    }

    .risk-badge-low {
        @apply risk-badge note-bg-success note-color-success;
    }

    /* Grid Layouts for Cards */
    .card-grid-2 {
        @apply grid md:grid-cols-2 note-gap-lg;
    }

    .card-grid-3 {
        @apply grid md:grid-cols-2 lg:grid-cols-3 note-gap-md;
    }

    .card-grid-metrics {
        @apply grid md:grid-cols-3 note-gap-md note-space-lg;
    }
}

/* Reading Progress and Navigation Styles */
.notes-progress {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 4px;
    background: rgb(30 41 59);
    /* slate-800 */
    z-index: 50;
}

.notes-progress-bar {
    height: 100%;
    background: rgb(59 130 246);
    /* blue-500 */
    transition: width 0.3s ease-out;
}

/* Table of Contents Styles */
.notes-toc-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 30;
}

.notes-toc-sidebar {
    position: fixed;
    top: 0;
    right: 0;
    height: 100vh;
    width: 20rem;
    /* 320px */
    background: rgb(15 23 42);
    /* slate-900 */
    border-left: 1px solid rgb(51 65 85);
    /* slate-700 */
    z-index: 40;
    overflow-y: auto;
}

/* Section Styling */
.notes-section {
    margin-bottom: 3rem;
}

.notes-section-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 1rem;
}

.notes-section-toggle {
    color: rgb(156 163 175);
    /* gray-400 */
    transition: color 0.2s;
}

.notes-section-toggle:hover {
    color: rgb(255 255 255);
    /* white */
}

/* Metrics Cards */
.notes-metrics-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    margin: 1.5rem 0;
}

.notes-metrics-card {
    background: rgb(30 41 59);
    /* slate-800 */
    padding: 1rem;
    border-radius: 0.5rem;
    border: 1px solid rgb(51 65 85);
    /* slate-700 */
}

.notes-metrics-value {
    font-size: 1.5rem;
    font-weight: 700;
    color: rgb(96 165 250);
    /* blue-400 */
}

.notes-metrics-label {
    font-size: 0.875rem;
    color: rgb(209 213 219);
    /* gray-300 */
    margin-top: 0.25rem;
}

.notes-metrics-trend {
    font-size: 0.75rem;
    margin-top: 0.25rem;
}

/* Tooltip Styles */
.notes-tooltip {
    position: relative;
    display: inline;
}

.notes-tooltip-text {
    text-decoration: underline;
    text-decoration-style: dotted;
    text-decoration-color: rgb(96 165 250);
    /* blue-400 */
    cursor: help;
}

.notes-tooltip-popup {
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    margin-bottom: 0.5rem;
    padding: 0.5rem 0.75rem;
    font-size: 0.75rem;
    background: rgb(51 65 85);
    /* slate-700 */
    color: white;
    border-radius: 0.5rem;
    opacity: 0;
    pointer-events: none;
    white-space: nowrap;
    z-index: 10;
    transition: opacity 0.2s;
}

.notes-tooltip:hover .notes-tooltip-popup {
    opacity: 1;
}

/* Print Styles */
@media print {
    .no-print {
        display: none !important;
    }

    body {
        font-size: 12pt !important;
        line-height: 1.5 !important;
        color: black !important;
        background: white !important;
    }

    .container {
        max-width: none !important;
        padding: 0 !important;
        margin: 0 !important;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    p,
    li {
        color: black !important;
    }

    .notes-metrics-card,
    .note-card,
    .metric-card {
        border: 1px solid #ccc;
        background: white;
    }

    .notes-metrics-value,
    .notes-metrics-label {
        color: black !important;
    }
}

/* Responsive Design */
@media (max-width: 768px) {
    .notes-toc-sidebar {
        width: 100vw;
    }

    .notes-metrics-grid,
    .card-grid-metrics {
        grid-template-columns: 1fr;
    }
}